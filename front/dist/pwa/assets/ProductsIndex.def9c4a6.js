import{_ as w,Q as r,R as m,S as a,T as t,L as q,Y as Q,ar as x,X as v,W as n,aB as g,a4 as D,aC as f,a3 as U,P as E,V as s,aD as u,U as p,a0 as C,a1 as I,a2 as P,b9 as T,Z as _,aE as F}from"./index.e5bf0941.js";import{Q as y,a as G}from"./QSpace.7be629cb.js";import{Q as V}from"./QImg.f4396dbb.js";import{Q as z}from"./QBadge.c2a0823b.js";import{a as B,Q as N}from"./QForm.4feb36c2.js";import{a as L,b,d as k}from"./QChip.628190ad.js";import{Q as A}from"./QList.fba40d4f.js";import"./format.2cae61da.js";const O={name:"Card2Component",props:{color:{type:String,default:"indigo"},title:{type:String,default:"Total"},subtitle:{type:String,default:"456 Unid"},icon:{type:String,default:"home"}}};function R(i,l,c,S,o,d){return r(),m(f,{flat:"",bordered:"",class:D(`bg-${c.color}`)},{default:a(()=>[t(g,{class:"q-pa-none"},{default:a(()=>[t(A,null,{default:a(()=>[q((r(),m(L,{clickable:""},{default:a(()=>[t(b,{avatar:""},{default:a(()=>[t(Q,{class:"bg-white text-white",size:"3.5em"},{default:a(()=>[t(x,{name:c.icon,color:c.color,size:"1.2em"},null,8,["name","color"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(k,{caption:"",class:"text-bold text-white"},{default:a(()=>[v(n(c.title),1)]),_:1}),t(k,{class:"text-h5 text-bold text-white"},{default:a(()=>[v(n(c.subtitle),1)]),_:1})]),_:1}),t(b,{side:""},{default:a(()=>[t(x,{name:"keyboard_arrow_right",color:"white"})]),_:1})]),_:1})),[[U]])]),_:1})]),_:1})]),_:1},8,["class"])}var J=w(O,[["render",R]]);const j={name:"ProductsIndex",components:{Card2Component:J},data(){return{products:[],product:{},categories:[],category:"",search:"",productDialog:!1,loading:!1}},mounted(){this.productsGet(),this.categoriesGet()},methods:{productDelete(){this.$alert.confirm("\xBFEstas seguro de eliminar este producto?").onOk(()=>{this.loading=!0,this.$axios.delete(`products/${this.product.id}`).then(i=>{this.productDialog=!1,this.productsGet()}).finally(()=>{this.loading=!1})})},handleFileChange(){const i=event.target.files[0];i&&(this.product.image=URL.createObjectURL(i))},productCreate(){if(this.$refs.file.files.length===0)return this.$alert.error("Debe seleccionar una imagen"),!1;this.loading=!0;const i=new FormData;i.append("product",JSON.stringify(this.product)),i.append("file",this.$refs.file.files[0]),this.$axios.post("products",i,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{this.productDialog=!1,this.productsGet()}).finally(()=>{this.loading=!1})},productUpdate(){this.loading=!0;const i=new FormData;i.append("product",JSON.stringify(this.product)),this.$refs.file.files.length>0&&i.append("file",this.$refs.file.files[0]),this.$axios.post(`products/${this.product.id}`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{this.productDialog=!1,this.productsGet()}).finally(()=>{this.loading=!1})},productSave(){this.product.id?this.productUpdate():this.productCreate()},productClick(){this.productDialog=!0,this.product={name:"",description:"",price:"",stock:"",image:"images.png",status:"1",costo:""}},productEditClick(i){this.productDialog=!0,this.product={...i}},productsGet(){this.$axios.get("products").then(i=>{this.products=i.data})},categoriesGet(){this.$axios.get("categories").then(i=>{this.categories=i.data})}},computed:{totalPrice(){let i=0;return this.products.forEach(l=>{i+=l.price*l.stock}),i.toFixed(2)},totalCost(){let i=0;return this.products.forEach(l=>{i+=l.costo*l.stock}),i.toFixed(2)}}},W={class:"row"},X={class:"col-12 col-md-4"},Y={class:"col-12 col-md-2"},Z={class:"col-12 col-md-6 text-right"},H={class:"col-12 col-md-4 q-pa-xs"},K={class:"col-12 col-md-4 q-pa-xs"},M={class:"col-12 col-md-4 q-pa-xs"},$={class:"col-12"},ee={class:"row"},te={class:"absolute-bottom text-subtitle2 text-center text-bold",style:{padding:"0px",background:"linear-gradient(rgba(0,0,0,0.05), rgba(0,0,0,0.7))",color:"white","line-height":"1"}},oe={class:"row items-center"},le={class:"text-bold text-center q-pl-xs"},se={class:"text-bold text-center q-pr-xs"},ie={class:"text-bold text-h6"},ae={class:"row"},de={class:"col-12 col-md-12 flex flex-center"},re={class:"col-12"},ne=s("label",{class:"text-caption text-bold"},"Nombre:",-1),ce={class:"col-12"},ue=s("label",{class:"text-caption text-bold"},"Descripcion:",-1),pe={class:"col-12 col-md-6"},me=s("label",{class:"text-caption text-bold"},"Precio:",-1),ge={class:"col-12 col-md-6"},fe=s("label",{class:"text-caption text-bold"},"Costo:",-1),he={class:"col-12"},_e=s("label",{class:"text-caption text-bold"},"Cantidad:",-1),be={class:"col-12"},xe=s("label",{class:"text-caption text-bold"},"Categoria:",-1),ve={class:"col-12"},Ce=s("label",{class:"text-caption text-bold"},"Estado:",-1);function ye(i,l,c,S,o,d){const h=E("Card2Component");return r(),m(B,{class:"bg-grey-3 q-pa-xs"},{default:a(()=>[t(f,null,{default:a(()=>[t(g,{class:"q-pa-xs"},{default:a(()=>[s("div",W,[s("div",X,[t(u,{modelValue:o.search,"onUpdate:modelValue":l[0]||(l[0]=e=>o.search=e),label:"Buscar",outlined:"",dense:""},null,8,["modelValue"])]),s("div",Y,[t(p,{color:"grey-8",label:"Descargar",class:"text-bold","no-caps":"",icon:"get_app",flat:"",rounded:""})]),s("div",Z,[t(p,{color:"green",label:"Crear Producto",class:"text-bold",onClick:l[1]||(l[1]=e=>d.productClick()),"no-caps":"",icon:"add_circle",rounded:"",loading:o.loading},null,8,["loading"])]),s("div",H,[t(h,{color:"green-8",title:"Productos",subtitle:o.products.length+" Unid",icon:"all_inbox"},null,8,["subtitle"])]),s("div",K,[t(h,{color:"indigo-8",title:"Total Stock",subtitle:d.totalPrice+" $",icon:"shopping_cart"},null,8,["subtitle"])]),s("div",M,[t(h,{color:"purple-8",title:"Total Ganancias",subtitle:d.totalCost+" $",icon:"attach_money"},null,8,["subtitle"])]),s("div",$,[s("div",ee,[(r(!0),C(P,null,I(o.products,e=>(r(),C("div",{class:"col-6 col-md-2",key:e.id},[t(f,{class:"q-ma-xs cursor-pointer",flat:"",bordered:"",onClick:Ve=>d.productEditClick(e)},{default:a(()=>[t(V,{src:`${i.$url}../images/${e.image}`,"spinner-color":"white","spinner-size":"40",style:{height:"100px"}},{default:a(()=>[s("div",te,[v(n(e.name)+" ",1),s("div",oe,[s("div",le,n(e.stock),1),t(y),s("div",se,n(e.price)+" $ ",1)])])]),_:2},1032,["src"])]),_:2},1032,["onClick"])]))),128))])])])]),_:1})]),_:1}),t(F,{modelValue:o.productDialog,"onUpdate:modelValue":l[12]||(l[12]=e=>o.productDialog=e),maximized:"",position:"right"},{default:a(()=>[t(f,{style:{width:"350px","max-width":"80vw"}},{default:a(()=>[t(g,{class:"row items-center q-pb-none"},{default:a(()=>[s("div",ie,n(o.product.id?"Editar":"Crear")+" Producto ",1),t(y),t(p,{flat:"",icon:"close",onClick:l[2]||(l[2]=e=>o.productDialog=!1)})]),_:1}),t(g,null,{default:a(()=>[t(N,{onSubmit:d.productSave},{default:a(()=>[s("div",ae,[s("div",de,[t(Q,{onClick:l[3]||(l[3]=e=>i.$refs.file.click()),class:"bg-grey-3","text-color":"grey-8",size:"100px"},{default:a(()=>[t(V,{src:o.product.image.includes("http")?o.product.image:`${i.$url}../images/${o.product.image}`,"spinner-color":"grey-8","spinner-size":"40",style:{height:"100px"}},null,8,["src"]),t(z,{color:"grey-8","text-color":"white",floating:""},{default:a(()=>[t(x,{name:"camera_alt"})]),_:1})]),_:1}),s("input",{type:"file",class:"hidden",onChange:l[4]||(l[4]=(...e)=>d.handleFileChange&&d.handleFileChange(...e)),ref:"file",accept:"image/*"},null,544)]),s("div",re,[ne,t(u,{modelValue:o.product.name,"onUpdate:modelValue":l[5]||(l[5]=e=>o.product.name=e),outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",ce,[ue,t(u,{modelValue:o.product.description,"onUpdate:modelValue":l[6]||(l[6]=e=>o.product.description=e),outlined:"",dense:"",type:"textarea"},null,8,["modelValue"])]),s("div",pe,[me,t(u,{modelValue:o.product.price,"onUpdate:modelValue":l[7]||(l[7]=e=>o.product.price=e),outlined:"",dense:"",type:"number",step:"0.01",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",ge,[fe,t(u,{modelValue:o.product.costo,"onUpdate:modelValue":l[8]||(l[8]=e=>o.product.costo=e),outlined:"",dense:"",type:"number",step:"0.01",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",he,[_e,t(u,{modelValue:o.product.stock,"onUpdate:modelValue":l[9]||(l[9]=e=>o.product.stock=e),outlined:"",dense:"",type:"number",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",be,[xe,t(G,{modelValue:o.product.category_id,"onUpdate:modelValue":l[10]||(l[10]=e=>o.product.category_id=e),options:o.categories,outlined:"",dense:"","emit-value":"","map-options":"","option-value":"id","option-label":"name",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","options","rules"])]),s("div",ve,[Ce,t(T,{modelValue:o.product.status,"onUpdate:modelValue":l[11]||(l[11]=e=>o.product.status=e),color:o.product.status?"green":"red","true-value":"ACTIVE","false-value":"INACTIVE"},{default:a(()=>[s("div",{class:D(`text-${o.product.status?"green":"red"} text-subtitle2 text-bold`)},n(o.product.status?"Activo":"Inactivo"),3)]),_:1},8,["modelValue","color"])])]),s("div",null,[o.product.id===void 0?(r(),m(p,{key:0,color:"primary",label:"Guardar",class:"text-bold full-width",type:"submit","no-caps":"",icon:"save",rounded:"",loading:o.loading},null,8,["loading"])):_("",!0),o.product.id!==void 0?(r(),m(p,{key:1,color:"yellow-8",label:"Actualizar",class:"text-bold full-width q-mb-md",type:"submit","no-caps":"",icon:"save",rounded:"",loading:o.loading},null,8,["loading"])):_("",!0),o.product.id!==void 0?(r(),m(p,{key:2,color:"red",outline:"",label:"Eliminar",class:"text-bold full-width","no-caps":"",icon:"close",rounded:"",onClick:d.productDelete,loading:o.loading},null,8,["onClick","loading"])):_("",!0)])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ie=w(j,[["render",ye]]);export{Ie as default};
